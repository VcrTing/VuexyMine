import{V as N}from"./VTable-2ddca156.js";import{d as C,o as c,b as B,w as s,n as u,c as d,F as w,a as S,y as m,p as D,r as P,q as r,z as p,Q as h,G as x,af as z,ah as O,l as b,a3 as R,s as U}from"./index-8830fac0.js";import{V as L}from"./VMenu-6ba2c256.js";import{V as F,a as y,b as T}from"./VList-18a8346a.js";import{A as _,a as g,E as G,u as H}from"./conf-6f0f887e.js";import{a as j,V as M}from"./VRow-7ada8777.js";import{V as q}from"./VCard-2251bf0a.js";import"./forwardRefs-a29b5f65.js";import"./VOverlay-6ebba9fb.js";import"./lazy-052468c5.js";import"./easing-9f15041e.js";import"./transition-6cf434f0.js";import"./dialog-transition-43f1c0f2.js";import"./ssrBoot-f3c014da.js";import"./VAvatar-5f7d57fd.js";import"./VImg-ced242ed.js";import"./VDivider-4bb05ad5.js";const J=C({__name:"DanTabie",props:{headers:null},setup(a){return(t,e)=>(c(),B(N,{density:"compact"},{default:s(()=>[u("thead",null,[u("tr",null,[(c(!0),d(w,null,S(a.headers,(n,i)=>(c(),d("th",{key:i,class:""},m(n.title),1))),128))])]),u("tbody",null,[D(t.$slots,"default")])]),_:3}))}}),Q=C({__name:"CoTabAction",emits:["trash","view"],setup(a){return(t,e)=>{const n=P("IconBtn");return c(),d("div",null,[r(n,{onClick:e[0]||(e[0]=i=>t.$emit("trash"))},{default:s(()=>[r(p,{icon:"tabler-trash"})]),_:1}),r(n,null,{default:s(()=>[r(p,{icon:"tabler-edit"})]),_:1}),r(x,{icon:"",variant:"text",size:"small",color:"medium-emphasis"},{default:s(()=>[r(p,{size:"24",icon:"tabler-dots-vertical"}),r(L,{activator:"parent"},{default:s(()=>[r(F,null,{default:s(()=>[r(y,{onClick:e[1]||(e[1]=i=>t.$emit("view"))},{prepend:s(()=>[r(p,{icon:"tabler-eye"})]),default:s(()=>[r(T,null,{default:s(()=>[h("View")]),_:1})]),_:1}),r(y,{link:""},{prepend:s(()=>[r(p,{icon:"tabler-pencil"})]),default:s(()=>[r(T,null,{default:s(()=>[h("Edit")]),_:1})]),_:1}),r(y,{onClick:e[2]||(e[2]=i=>t.$emit("trash"))},{prepend:s(()=>[r(p,{icon:"tabler-trash"})]),default:s(()=>[r(T,null,{default:s(()=>[h("Delete")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});class K{uri(t,e,n=""){return`${t}/${G[e]}/${n}`}headers(t){return t?{"Content-Type":"application/json",Authorization:`Bearer ${t}`}:{"Content-Type":"application/json"}}params(t,e="?"){if(JSON.stringify(t)!=="{}")for(const n in t)e+=`${n}=${t[n]}&`;return e}}class W extends K{async one(t,e,n,i){const l=super.uri(_,t,n)+super.params(i);console.log("ONE URI =",l);const o=await g.get(l,{headers:super.headers(e)});return o&&o.status<399?o.data:{}}async get(t,e,n,i){const l=super.uri(_,t,i)+super.params(n);console.log("GET URI =",l);const o=await g.get(l,{headers:super.headers(e)});return o&&o.status<399?o.data:{}}async pos(t,e,n){const i=super.uri(_,t,"");return console.log("POST uri =",i),console.log("POST DATA =",n),await g.post(i,n,{headers:super.headers(e)})}async put(t,e,n,i,l){const o=super.uri(_,t,i);return console.log("PATCH uri =",o),console.log("PATCH DATA =",n),g.patch(o,n,{headers:super.headers(e),params:l})}funni(t){const e={"sort[0]":t.sort?t.sort:"createdAt:desc","pagination[page]":t.star?t.star:1,"pagination[pageSize]":t.imit?t.imit:10};if(t.funni)for(const n in t.funni)e[n]=t.funni[n];return e}}const k=new W,X=(a,t=[])=>a?a.data:t,$=a=>({id:a.id,...a.attributes}),V=function(a,t=!0){return a=t?X(a):a,a?a.constructor===Array?a.map(e=>$(e)):a?$(a):null:[]},A=function(a,t){return a.map(e=>(t.length>0&&t.map(n=>(e[n]=V(e[n]),n)),e)),a},Y={data:V,kiii_of_k:A,ser_aii:(a,t)=>{const e=V(a);return{data:e?A(e,t):[],page:a.meta?a.meta.pagination:{}}}},Z=async a=>{const t=await k.get("customer",H().jwt,k.funni(a));if(t&&t.data)return Y.ser_aii(t,[])},tt={many:Z},et=z("customerStore",{state:()=>({user:{}}),getters:{},actions:{fetching(a){return tt.many(a)},deieted(a){return a}}}),at={class:""},Ct=C({__name:"index",setup(a){const t=[{title:"ID",key:"id"},{title:"用户名称",key:"username"},{title:"电邮地址",key:"email"},{title:"电话号码",key:"phone_no"},{title:"",key:"actions",sortable:!1}],e=O({ioading:!0}),n=b([]),i=b({page:1,pageCount:503,pageSize:10,total:5030});return R(()=>{e.ioading=!0,et().fetching({}).then(o=>{console.log("CUSTOMER FECTHING RES =",o),n.value=o.data,i.value=o.page,e.ioading=!1}).catch(o=>{console.error(o),e.ioading=!1})}),(o,nt)=>{const I=Q,v=J;return c(),d("section",null,[r(M,null,{default:s(()=>[r(j,null,{default:s(()=>[r(q,{title:"用户列表"},{default:s(()=>[r(v,{headers:t},{default:s(()=>[(c(!0),d(w,null,S(U(n),(f,E)=>(c(),d("tr",{key:E},[u("td",null,m(f.id),1),u("td",null,m(f.username),1),u("td",null,m(f.email),1),u("td",null,m(f.phone_no),1),u("td",at,[r(I)])]))),128))]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{Ct as default};
